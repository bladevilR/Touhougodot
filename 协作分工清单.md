# 东方弹幕游戏 - 协作分工清单

## 📋 项目概述

本文档定义了 Godot 东方弹幕游戏的协作分工，明确了哪些工作需要在 Godot 编辑器中完成，哪些由代码实现。

---

## ✅ 已完成的技术修复

### 1. 火鸟拳 (原"凤凰利爪") - 扇形横扫效果
- ✅ 改为7发密集扇形横扫（原5发）
- ✅ 速度降低到30（极慢，几乎停留原地）
- ✅ 持续时间0.25秒（快速消失，模拟横扫）
- ✅ 使用拉长矩形纹理代替圆形
- ✅ 冷却时间0.8秒，伤害35
- ✅ 重命名为"火鸟拳"，所有升级也改为拳脚相关名称

### 2. 关于主动攻击逻辑
当前是**自动攻击**（每0.8秒自动释放）。如果需要主动释放：
- 需要在 Godot 编辑器中添加按钮UI
- 然后编写代码连接按钮信号到技能释放

---

## 🎯 协作分工

### 🎨 美术/编辑器操作（需要 Godot 编辑器）

#### 1. 角色精灵图
**路径**: `res://assets/characters/`

**当前状态**: 使用 ColorRect 占位

**需要**:
- 真实角色 Sprite Sheet
- 推荐格式: 4x4帧 或 2x4帧
- 角色列表:
  - 博丽灵梦
  - 藤原妹红
  - 雾雨魔理沙
  - 十六夜咲夜
  - 矢田寺成美
  - 古明地恋

**操作**: 在 Godot 中将图片导入到 `assets/characters/` 文件夹

---

#### 2. 子弹/弹幕纹理
**路径**: `res://assets/bullets/`

**当前已有**:
- `amulet.png` - 符纸
- `star.png` - 星星
- `big_bullet.png` - 大型弹幕
- `rice_bullet.png` - 米粒弹
- `knife.png` - 飞刀
- `yinyang.png` - 阴阳玉

**建议添加**:
- 火焰拳效果图（横扫形状）
- 激光光束贴图
- 地雷模型
- 汤勺贴图
- 燃烧/冰冻/雷电特效
- 爆炸特效

**操作**: 导入贴图到 `assets/bullets/` 文件夹

---

#### 3. 敌人精灵图
**路径**: `res://assets/enemies/`

**需要**:
- 普通小怪（多种类型）
- 精英怪
- Boss 精灵
- 动画帧（如果有的话）

**操作**: 导入贴图到 `assets/enemies/` 文件夹

---

#### 4. UI 素材
**需要**:
- 主菜单背景图
- 按钮样式（正常/悬停/按下）
- 技能按钮图标
- 生命条/经验条素材
- 升级界面卡片背景
- 暂停菜单背景

**操作**:
1. 导入素材到 `assets/ui/` 文件夹
2. 在 Godot 场景编辑器中应用到对应节点

---

#### 5. 地图设计
**路径**: `World.tscn`

**当前状态**: 纯色背景

**可以做**:
- 添加 TileMap（瓦片地图）
- 设置背景图片（天空、地面等）
- 添加装饰物（树木、石头、建筑）
- 设置碰撞墙体（限制玩家移动范围）
- 添加环境粒子效果（雪花、樱花等）

**操作**: 在 Godot 场景编辑器中编辑 `World.tscn`

---

#### 6. UI 布局调整
**场景文件**:
- `MainMenu.tscn` - 主菜单
- `HUD.tscn` - 游戏内界面
- `LevelUpScreen.tscn` - 升级界面
- `PauseMenu.tscn` - 暂停菜单（如果有）

**可以调整**:
- 按钮位置和大小
- 生命条/经验条位置
- 技能图标排列
- 升级卡片排列方式
- 文字字体和大小

**操作**: 在 Godot 场景编辑器中拖拽节点调整

---

#### 7. 音效/音乐
**路径**: `res://assets/audio/`

**需要**:
- **音效 (SFX)**:
  - 攻击音效（拳击、弹幕发射）
  - 受击音效
  - 技能释放音效
  - 升级音效
  - UI点击音效
  - 爆炸音效

- **背景音乐 (BGM)**:
  - 主菜单音乐
  - 战斗音乐
  - Boss战音乐
  - 胜利/失败音乐

**操作**:
1. 导入音频文件到 `assets/audio/`
2. 在需要的场景中添加 AudioStreamPlayer 节点
3. 设置 Stream 属性为导入的音频

---

#### 8. 数值调整（配置文件）
**文件**:
- `WeaponData.gd` - 武器数值
- `CharacterData.gd` - 角色属性
- `EnemyData.gd` - 敌人数值

**可以调整**:
```gdscript
# 例如在 WeaponData.gd 中
var phoenix_claws = WeaponConfig.new(
    "phoenix_claws",
    "火鸟拳",
    "向前方挥出火焰拳脚，近战扇形横扫攻击。",
    12,    # ← 基础伤害（可调）
    0.8,   # ← 冷却时间（可调）
    35.0,  # ← 范围（可调）
    GameConstants.WeaponType.PROJECTILE
)
```

**注意**: 调整前建议先询问参数含义

---

### 💻 代码/逻辑开发（由 AI 完成）

#### 1. 核心系统开发
- ✅ 武器系统
- ✅ 升级系统
- ✅ 技能系统
- ✅ 元素反应系统
- ⏳ 波次管理系统（进行中）
- ⏳ Boss AI（待开发）

#### 2. 新功能实现
- 新武器机制代码
- 新敌人行为逻辑
- 新技能效果实现
- 特殊玩法机制

#### 3. Bug 修复
- 碰撞检测问题
- 性能优化
- 逻辑错误修复
- 数据同步问题

#### 4. 数据结构设计
- 新武器配置模板
- 敌人数据模板
- 关卡配置系统
- 存档系统

---

## 🔄 协作流程

### 并行工作模式

```
您的工作                      AI的工作
├─ 准备美术素材               ├─ 开发新系统
├─ 设计地图场景               ├─ 修复Bug
├─ 调整UI布局                 ├─ 实现新机制
├─ 添加音效音乐               ├─ 性能优化
└─ 测试并反馈                 └─ 编写文档
```

### 沟通方式

1. **您提需求** → AI 写代码/修Bug
2. **AI 完成代码** → 您测试并提供反馈
3. **您提供素材路径** → AI 在代码中加载
4. **需要添加资源时** → 您在 Godot 中拖拽挂载

---

## 📅 当前优先级

### 🔥 立即可做

**您**:
- [ ] 准备角色精灵图（妹红、灵梦等）
- [ ] 设计简单地图（添加背景图）
- [ ] 收集/制作基础弹幕贴图

**AI**:
- [ ] 继续完善武器系统
- [ ] 实现升级效果应用
- [ ] 优化光环跟随逻辑

### 📆 近期计划

**您**:
- [ ] 制作/收集更多弹幕素材
- [ ] 设计完整的UI界面
- [ ] 添加背景音乐和音效
- [ ] 测试游戏并调整数值

**AI**:
- [ ] 实现更多武器类型
- [ ] 添加更多敌人种类
- [ ] 开发波次系统
- [ ] 实现存档功能

---

## 🎯 关键问题决策

### ❓ 主动攻击按钮

**选项 A**: 现在就添加主动攻击UI
- AI 先写释放逻辑
- 您在编辑器中创建按钮并挂载信号

**选项 B**: 先保持自动攻击
- 之后再添加主动释放功能
- 当前专注于其他核心功能

**请选择**: [ A / B ]

---

## 📝 备注

- **GDScript 文件**: 代码文件，由 AI 编写和修改
- **`.tscn` 文件**: 场景文件，可在 Godot 编辑器中可视化编辑
- **资源文件**: 图片、音频等，导入后自动生成 `.import` 文件

**重要**: 修改代码文件前请先沟通，避免冲突！

---

**文档版本**: v1.0
**最后更新**: 2025-12-13
**项目状态**: 开发中
